in
popr RAX
in
popr RBX
in
popr RCX

pushr RAX
push 0
je :zero_a

call :solve_quadratic
jmp :end

:zero_a
pushr RBX
push 0
je :zero_b

call :solve_linear
jmp :end

:zero_b
pushr RCX
push 0
je :zero_c

push 0
out
jmp :end

:zero_c
push -1
out

:end
hlt

:no_solution
push 0
out
ret

:one_solution
push 1
out
pushr RBX
push -1
mul
push 2
pushr RAX
mul
div
out
ret

:solve_quadratic
pushr RBX
pushr RBX
mul
push 4
pushr RAX
mul
pushr RCX
mul
sub
popr RDX

pushr RDX
push 0
jb :no_solution

pushr RDX
push 0
je :one_solution

push 2
out
pushr RBX
push -1
mul
pushr RDX
sqrt
add
push 2
pushr RAX
mul
div
out
pushr RBX
push -1
mul
pushr RDX
sqrt
sub
push 2
pushr RAX
mul
div
out
ret

:solve_linear
push 1
out
pushr RCX
push -1
mul
pushr RBX
div
out
ret
